<div class="breadcrumb">
    <h1>CosmeTic</h1>
    <ul>
        <li><a href="">Ventas</a></li>
        <li>Pagos</li>
    </ul>
</div>

<div class="separator-breadcrumb border-top"></div>

<div class="col-md-12 mb-3">
    <div class="row">
        <div class="col-md-6">
            <button class="btn btn-primary float-right" [routerLink]="['/pagos/registrar']">Crear nuevo pago</button>
        </div>
        <div class="col-md-6 d-flex justify-content-end">
            <input _ngcontent-vet-c167="" id="email" placeholder="Buscar Pagos" type="text"
                class="form-control  ng-valid ng-touched ng-dirty" ng-reflect-form="[object Object]"
                style="width: 50%;">
        </div>
    </div>
</div>

<div class="card o-hidden">
    <ngx-datatable class="material fullscreen" style="height: 460px;" [columnMode]="'force'" [headerHeight]="50"
        [footerHeight]="50" [rowHeight]="60" [scrollbarV]="true" [rows]="listPayments" [externalPaging]="true"
        [count]="listPayments.length" [limit]="itemsPerPage" [offset]="(currentPage - 1) * itemsPerPage"
        (page)="onPageChange($event)">
        <ngx-datatable-column name="id_client">
            <ng-template ngx-datatable-header-template>
                Cliente
            </ng-template>
            <ng-template ngx-datatable-cell-template let-value="value" let-row="row">
                {{ clients[row.id_client] }}
            </ng-template>
        </ngx-datatable-column>
        <ngx-datatable-column name="payment_date">
            <ng-template ngx-datatable-header-template>
                Fecha de pago
            </ng-template>
            <ng-template ngx-datatable-cell-template let-value="value" let-row="row">
                {{ row.payment_date | date: 'yyyy-MM-dd' }}
            </ng-template>
        </ngx-datatable-column>
        <ngx-datatable-column name="id_sale">
            <ng-template ngx-datatable-header-template>
                # venta
            </ng-template>
            <ng-template ngx-datatable-cell-template let-value="value" let-row="row">
                {{ row.id_sale }}
            </ng-template>
        </ngx-datatable-column>
        <ngx-datatable-column name="total_payment">
            <ng-template ngx-datatable-header-template>
                Total pago
            </ng-template>
            <ng-template ngx-datatable-cell-template let-value="value" let-row="row">
                {{ row.total_payment }}
            </ng-template>
        </ngx-datatable-column>
        <!-- <ngx-datatable-column name="total_sale">
            <ng-template ngx-datatable-header-template>
                Total venta
            </ng-template>
            <ng-template ngx-datatable-cell-template let-value="value" let-row="row">
                {{ row.sales.total_sale }}
            </ng-template>
        </ngx-datatable-column> -->
        <ngx-datatable-column name="total_remaining">
            <ng-template ngx-datatable-header-template>
                Total restante
            </ng-template>
            <ng-template ngx-datatable-cell-template let-value="value" let-row="row">
                {{ row.total_remaining }}
            </ng-template>
        </ngx-datatable-column>
        <ngx-datatable-column [width]="120">
            <ng-template ngx-datatable-header-template>
                Acciones
            </ng-template>
            <ng-template ngx-datatable-cell-template let-value="value" let-row="row">
                
                <button class="btn btn-dark m-1 me-3" [routerLink]="['/pagos/detalle/clientes', row.id_client]">
                    <i class="i-Eye"></i>
                </button>
            </ng-template>
        </ngx-datatable-column>
    </ngx-datatable>
</div>

<!-- Agrega los controles de paginaciÃ³n justo debajo de la tabla -->
<pagination-template (pageChange)="pageChanged($event)" [id]="paginationId">
</pagination-template>